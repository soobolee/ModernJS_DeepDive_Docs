
# 전역변수

<br>

전역 스코프를 가지는 변수이다. 전역스코프를 가지므로 무분별한 사용은 `위험`하다.<br>

<br>

## 변수의 생명주기

<br>

1. 지역변수<br>
변수는 선언에 의해 생성되고 할당에 의해 값을 가진다. 즉, 메모리 공간을 할당한다.<br>

<br>

```JavaScript
function foo() {
  var x = 1;
  console.log(x) // 1
}

console.log(x) // ReferenceError
```

<br>

함수 내부의 지역변수는 함수가 호출되면 생성된다, 그리고 함수가 종룓히면 사라진다.<br>
즉, `지역변수 생명주기` = `함수 생명주기` 이다.<br>

<br>

- 지역변수 호이스팅<br>

```JavaScript
var x = "global";

function foo() {
  console.log(x); // undefined
  var x = "local";
}

foo();
console.log(x); // "global"
```

<br>

호이스팅은 스코프 단위로 움직이기 때문에 지역스코프를 가진 x 변수는 foo 안에서 새롭게 undefined로 할당되고 출력된다.<br>

<hr>

2. 전역변수<br>
전역변수는 명시적인 호출없이 실행되어지고 종료문이 없다.<br>
전역변수는 전역객체의 프로퍼티가 된다. 따라서,<br>
전역변수는 전역스코프를 가지며 전역객체가 사라질 때 즉, 어플리케이션의 종료시점에 사라진다.<br>

<br>

> 전역객체 -> 브라우저 - `window`, Node.js - `global`

<br>

## 전역변수의 문제점

<br>

- `암묵적 결합` <br>
  전역변수를 선언한 시점에 모든 코드가 전역변수를 참조하고 변경할 수 있는 암묵적 결합을 허용하는 것이다.<br>
  변수의 유효범위가 크면 가독성을 해치고 변수의 값 안정성을 낮춘다.<br>
<br>

- `긴 생명주기` <br>
  전역변수는 긴 생명주기를 가지므로 불필요한 전역변수는 메모리 공간을 쓸데없이 차진한다.<br>
<br>

- `스코프 체인 상 중첩에 존재` <br>
  스코프 체인상 최상단에 위치하기 때문에, 변수를 검색 시 가장 느리다. 이는 사용자 경험과 연결된다.<br>
<br>

- `네임스페이스 오염` <br>
  JS는 파일이 분리되어도 하나의 전역객체를 공유한다, 따라서 의도적이지 않은 변수명 중첩 혹은 예상치 못한 결과를 가져올 수 있다.<br>

<br>

## 전역 변수 억제하기

<br>

1. 즉시 실행함수<br>
<br>
모든 코드를 즉시실행 함수로 감싸면 함수의 시작과 종료 시 변수는 `소멸`된다.<br>
<br>
2. 모듈 패턴<br>
<br>
모듈의 `독자적인 모듈 스코프`를 사용하여 억제할 수 있다.<br>
모듈은 파일자체의 스코프를 가지기 때문에 <br>
모듈의 전역변수는 더 이상 전역변수가 아니다. window객체의 프로퍼티도 아니다.<br>















